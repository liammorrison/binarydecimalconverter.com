<!DOCTYPE html>
<html>

<head>
    <title>binary_decimal_converter</title>
    <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32">

    <style>
        body {
            margin-left: 0%;
            margin-right: 0%;
            margin-top: 0%;
            
            background-color: aliceblue;
        }

        sub {
            font-size: 14px;
        }

        .darkText {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 19px;
            color: midnightblue;
            text-shadow: 0px 0.5px black;
        }

        .lightText {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 20px;
            color: lightskyblue;
            text-shadow: 0px 0.5px white;
        }

        #header {
            width: 100%;
            height: 84px;

            background-color: lightskyblue;

            border-bottom-style: ridge;
            border-color: midnightblue;
            border-width: 4px;

            color: darkslateblue;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 60px;
            text-shadow: 0px 2px black;
        }

        #title {
            width: fit-content;

            /* Centers content. */
            margin: 0 auto;
            position: relative;
            top: 50%;
            transform: translateY(-50%);

            white-space: nowrap;
        }

        #body {
            width: 800px;
            margin: 10px auto;
            padding: 12px;

            background-color: lightskyblue;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 12px;
        }

        #instructions {
            padding: 12px;

            background-color: navy;

            text-align: center;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 12px;
        }

        #inputs {
            margin-top: 10px;
            padding: 12px;

            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 13px;

            background-color: navy;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 8px;
        }

        #inputType {
            display:flex;
        }

        #inputTypeSelect {
            flex-grow: 1;
            margin-left: 6px;
            padding-left: 4px;

            background-color:lightskyblue;

            font-size: 16px;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 3px;
        }

        #outputType {
            display:flex;
        }

        #outputTypeSelect {
            flex-grow: 1;
            margin-left: 6px;
            padding-left: 4px;

            background-color:lightskyblue;

            font-size: 16px;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 3px;
        }

        #inputValue {
            display: flex;
        }

        #inputValueField {
            flex-grow: 1;
            margin-left: 6px;
            padding: 0px 4px;
            background-color:lightskyblue;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 3px;
        }

        #outputValue {
            display: flex;
        }

        #outputValueField {
            flex-grow: 1;
            margin-left: 10px;
        }

        #calculateButton {
            grid-column-start: 1;
            grid-column-end: 3;
            padding: 1px;
            margin: 1px;
            background-color:lightskyblue;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 3px;
        }

        #calculateButton:hover {
            padding: 2px;
            margin: 0px;

            background-color: dodgerblue;

            font-size: 20px;
        }

        #output {
            margin-top: 10px;
            padding: 12px 0px;

            background-color: navy;

            font-size: 24px;
            text-align: center;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 8px;

            visibility: hidden;
        }

        #output:empty {
            margin: 0px;
            padding: 0px;
            border-width: 0px;
        }

        #explanation {
            margin-top: 10px;
            padding: 12px;

            background-color: navy;

            text-align: center;

            border-style: ridge;
            border-color: midnightblue;
            border-width: 4px;
            border-radius: 8px;

            visibility: hidden;
        }

        #explanation:empty {
            margin: 0px;
            padding: 0px;
            border-width: 0px;
        }

        #footer {
            position: relative;
            bottom: 0;
            width: 100%;
            text-align: center;

            padding: 0px, 10px;

            font-size: 15px;
        }
    </style>
</head>

<body>
    <div id="header">
        <div id="title">Binary Decimal Converter</div>
    </div>
    <div id="body">
        <div id="instructions" class="lightText">Welcome to the Binary Decimal Converter!<br><br>Please enter the value to be converted. Select the input and output types. Then click the Calculate button to receive the output.</div>
        <div id="inputs">
            <div id="inputType" class="lightText">
                <div id="inputTypeText">Input Type:</div>
                <select id="inputTypeSelect" class="darkText">
                    <option value="none" selected hidden>Not Selected</option>
                    <option value="binaryUnsigned">Binary (Unsigned)</option>
                    <option value="binarySigned">Binary (Signed)</option>
                    <option value="binary1sComp">Binary (1's Complement)</option>
                    <option value="binary2sComp">Binary (2's Complement)</option>
                    <option value="decimal">Decimal</option>
                    <option value="hex">Hex</option>
                </select>
            </div>
            <div id="outputType" class="lightText">
                <div id="outputTypeText">Output Type:</div>
                <select id="outputTypeSelect" class="darkText">
                    <option value="none" selected hidden>Not Selected</option>
                    <option value="binaryUnsigned">Binary (Unsigned)</option>
                    <option value="binarySigned">Binary (Signed)</option>
                    <option value="binary1sComp">Binary (1's Complement)</option>
                    <option value="binary2sComp">Binary (2's Complement)</option>
                    <option value="decimal">Decimal</option>
                    <option value="hex">Hex</option>
                </select>
            </div>
            <div id="inputValue" class="lightText">
                <div id="inputValueText">Input:</div>
                <input type="text" id="inputValueField" class="darkText"></input>
            </div>
            <div id="outputValue" class="lightText">
                <div id="outputValueText">Output:</div>
                <div id="outputValueField" class="lightText"></div>
            </div>
            <button id="calculateButton" class="darkText">Calculate</button>
        </div>
        <div id="output" class="lightText"></div>
        <div id="explanation" class="lightText"></div>
    </div>

    <footer id="footer" class="darkText">Liam Morrison, <script >document.write(new Date().getFullYear());</script></footer>

    <script>
        // Initiates the conversions if the calculate button is pressed.
        let calculateButton = document.getElementById("calculateButton");
	    calculateButton.addEventListener("click", displayOutput);

        // Initiates the conversions if the enter key is pressed in the input field.
        let inputValueText = document.getElementById("inputValueField");
	    inputValueText.addEventListener("keydown", function(e) {
            if (e.keyCode == 13) {
                displayOutput();
            }
        });

        let outputElement = document.getElementById("output");
        let outputValueField = document.getElementById("outputValueField");
        let explanation = document.getElementById("explanation");

        let input = 1;
        let inputType = "Not Selected";
        let outputType = "Not Selected";

        // Creates an array filled with many powers of 2 for binary base conversions.
        let powers = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824, 2147483648, 4294967296];

        // Chooses the appropriate conversion to run based on the input and output types.
        function calculateOutput() {
            if (inputType == "binaryUnsigned" && outputType == "binarySigned") {
                let output = convertBinaryUnsignedToBinarySigned(input);
                return output;
            } else if (inputType == "binaryUnsigned" && outputType == "binary1sComp") {
                let output = convertBinaryUnsignedToBinary1sComp(input);
                return output;
            } else if (inputType == "binaryUnsigned" && outputType == "binary2sComp") {
                let output = convertBinaryUnsignedToBinary2sComp(input);
                return output;
            } else if (inputType == "binaryUnsigned" && outputType == "decimal") {
                let output = convertBinaryUnsignedToDecimal(input);
                return output;
            } else if (inputType == "binaryUnsigned" && outputType == "hex") {
                let output = convertBinaryToHex(input);
                return output;
            } else if (inputType == "binarySigned" && outputType == "binaryUnsigned") {
                let output = convertBinarySignedToBinaryUnsigned(input);
                return output;
            } else if (inputType == "binarySigned" && outputType == "binary1sComp") {
                let output = convertBinarySignedToBinary1sComp(input);
                return output;
            } else if (inputType == "binarySigned" && outputType == "binary2sComp") {
                let output = convertBinarySignedToBinary2sComp(input);
                return output;
            } else if (inputType == "binarySigned" && outputType == "decimal") {
                let output = convertBinarySignedToDecimal(input);
                return output;
            } else if (inputType == "binarySigned" && outputType == "hex") {
                let output = convertBinaryToHex(input);
                return output;
            } else if (inputType == "binary1sComp" && outputType == "binaryUnsigned") {
                let output = convertBinary1sCompToBinaryUnsigned(input);
                return output;
            } else if (inputType == "binary1sComp" && outputType == "binarySigned") {
                let output = convertBinary1sCompToBinarySigned(input);
                return output;
            } else if (inputType == "binary1sComp" && outputType == "binary2sComp") {
                let output = convertBinary1sCompToBinary2sComp(input);
                return output;
            } else if (inputType == "binary1sComp" && outputType == "decimal") {
                let output = convertBinary1sCompToDecimal(input);
                return output;
            } else if (inputType == "binary1sComp" && outputType == "hex") {
                let output = convertBinaryToHex(input);
                return output;
            } else if (inputType == "binary2sComp" && outputType == "binaryUnsigned") {
                let output = convertBinary2sCompToBinaryUnsigned(input);
                return output;
            } else if (inputType == "binary2sComp" && outputType == "binarySigned") {
                let output = convertBinary2sCompToBinarySigned(input);
                return output;
            } else if (inputType == "binary2sComp" && outputType == "decimal") {
                let output = convertBinary2sCompToDecimal(input);
                return output;
            } else if (inputType == "binary2sComp" && outputType == "binary1sComp") {
                let output = convertBinary2sCompToBinary1sComp(input);
                return output;
            } else if (inputType == "binary2sComp" && outputType == "hex") {
                let output = convertBinaryToHex(input);
                return output;
            } else if (inputType == "decimal" && outputType == "binaryUnsigned") {
                let output = convertDecimalToBinaryUnsigned(input);
                return output;
            } else if (inputType == "decimal" && outputType == "binarySigned") {
                let output = convertDecimalToBinarySigned(input);
                return output;
            } else if (inputType == "decimal" && outputType == "binary1sComp") {
                let output = convertDecimalToBinary1sComp(input);
                return output;
            } else if (inputType == "decimal" && outputType == "binary2sComp") {
                let output = convertDecimalToBinary2sComp(input);
                return output;
            } else if (inputType == "decimal" && outputType == "hex") {
                // Converts decimal to hex using binary 2's complement as a mediator.
                let binary2sComp = convertDecimalToBinary2sComp(input);
                let output = convertBinaryToHex(binary2sComp);
                return output;
            } else if (inputType == "hex" && outputType == "binaryUnsigned") {
                let output = convertHexToBinary(input);
                return output;
            } else if (inputType == "hex" && outputType == "binarySigned") {
                let output = convertHexToBinary(input);
                return output;
            } else if (inputType == "hex" && outputType == "binary1sComp") {
                let output = convertHexToBinary(input);
                return output;
            } else if (inputType == "hex" && outputType == "binary2sComp") {
                let output = convertHexToBinary(input);
                return output;
            } else if (inputType == "hex" && outputType == "decimal") {
                // Converts hex to decimal using binary 2's complement as a mediator.
                let binary2sComp = convertHexToBinary(input);
                let output = convertBinary2sCompToDecimal(binary2sComp);
                return output;
            }
        }

        function convertBinaryUnsignedToBinarySigned(binaryUnsigned) {
            let binarySigned;
            let output;

            if (binaryUnsigned >= 0) {
                binarySigned = "0" + removeLeadingZeros(binaryUnsigned, false);
                explanation.innerHTML += "Add the positive sign (0) in front of the unsigned binary (with all redundant leading 0s removed) to make it signed:";
                explanation.innerHTML += "<br><q>0</q> + " + binaryUnsigned + " = " + binarySigned;
            } else {
                binarySigned = "1" + removeLeadingZeros(binaryUnsigned.substring(1), false);
                explanation.innerHTML += "Replace the negative sign in front of the unsigned binary (with all redundant leading 0s removed) with a 1 to make it signed:";
                explanation.innerHTML += "<br>" + binaryUnsigned + " -> " + binarySigned;
            }

            return binarySigned;
        }

        function convertBinaryUnsignedToBinary1sComp(binaryUnsigned) {
            let output;

            if (binaryUnsigned >= 0) {
                // If the input is positive or 0, then the signed binary is returned.
                output = convertBinaryUnsignedToBinarySigned(binaryUnsigned);
                return output;
            } else {
                explanation.innerHTML += "Replace the negative sign with a 0 and remove all redundant leading 0s (if any):<br>" + binaryUnsigned;

                //Removes all redundant leading 0s after the negative sign.
                binaryUnsigned = removeLeadingZeros(binaryUnsigned.substring(1));

                // The negative sign is replaced with a 0 (which will later be switched to a 1) so that the answer will be only numbers.
                binaryUnsigned = "0" + binaryUnsigned;

                explanation.innerHTML += " -> " + binaryUnsigned;

                // Converts the input into an array with each digit as its own item.
                let outputArray = Array.from(String(binaryUnsigned), Number);
                
                // From i moving left, all digits are complemented.
                for (i = outputArray.length - 1; i >= 0; i--) {
                    if (outputArray[i] == 0) {
                        outputArray[i] = 1;
                    } else {
                        outputArray[i] = 0;
                    }
                }

                output = createBinaryOutputLeftToRight(outputArray);

                explanation.innerHTML += "<br><br>Complement all digits:<br>" + binaryUnsigned + " -> " + output;

                // Removes the redundant leading one that comes with inputs being having only a one on the highest digit.
                if (output.substring(0, 2) == "11") {
                    output = output.substring(1);
                }

                return output;
            }
        }

        function convertBinaryUnsignedToBinary2sComp(binaryUnsigned) {
            let output;

            if (binaryUnsigned >= 0) {
                // If the input is positive or 0, then the signed binary is returned.
                output = convertBinaryUnsignedToBinarySigned(binaryUnsigned);
                return output;
            } else {
                let binary1sComp = convertBinaryUnsignedToBinary1sComp(binaryUnsigned);
                explanation.innerHTML += "<br><br>"
                let output = convertBinary1sCompToBinary2sComp(binary1sComp);

                return output;
            }
        }

        function convertBinaryUnsignedToDecimal(binary) {
            explanation.innerHTML += "Add each corresponding binary digit's power of 2 to the total if it is 1 (digits are counted from right to left starting at index 0):<br>"
            let decimalTotal = 0;
            // Converts the input into an array with each digit as its own item.
            let binaryArray = Array.from(String(binary), Number);

            // Adds the decimal value for each filled binary digit to the decimalTotal.
            let j = 0;
            for (let i = binaryArray.length - 1; i >= 0; i--) {
                if (binaryArray[i] == 1) {
                    explanation.innerHTML += "Total (" + decimalTotal + ") + Digit " + j + " (" + powers[j] + ") = ";
                    decimalTotal += powers[j];
                    explanation.innerHTML += decimalTotal + "<br>";
                }

                j++;
            }

            // Adds the negative sign back to the output if the input was negative.
            if (binary < 0) {
                decimalTotal = -decimalTotal;
                explanation.innerHTML += "<br>Add the negative sign back (if there is one):";
                explanation.innerHTML += "<br>Total = " + decimalTotal;
                return decimalTotal;
            } else {
                explanation.innerHTML += "<br>Total = " + decimalTotal;
                return decimalTotal;
            }
        }

        function convertBinarySignedToBinaryUnsigned(binarySigned) {
            let binaryUnsigned;

            // Removes leading 0s or replaces a leading 1 with a negative sign.
            if (binarySigned.substring(0, 1) == 0) {
                binaryUnsigned = removeLeadingZeros(binarySigned, false);
                explanation.innerHTML += "Remove all leading 0s to make it unsigned.";
                explanation.innerHTML += "<br>" + binarySigned + " - leading 0s = " + binaryUnsigned;
            } else {
                binaryUnsigned = "-" + removeLeadingZeros(binarySigned.substring(1), false);
                explanation.innerHTML += "Replace the 1 in front of the unsigned binary (with all redundant leading 0s removed) with a negative sign to make it unsigned.";
                explanation.innerHTML += "<br>" + binarySigned + " -> " + binaryUnsigned;
            }

            return binaryUnsigned;
        }

        function convertBinarySignedToBinary1sComp(binarySigned) {
            // Converts signed binary to unsigned binary to 2's complement binary.
            explanation.innerHTML += "First convert the signed binary (" + binarySigned + ") to unsigned binary:<br>";
            let binaryUnsigned = convertBinarySignedToBinaryUnsigned(binarySigned);
            explanation.innerHTML += "<br><br>Then convert the unsigned binary (" + binaryUnsigned + ") to 1's complement binary:<br>";
            let output = convertBinaryUnsignedToBinary1sComp(binaryUnsigned);
            return output;
        }

        function convertBinarySignedToBinary2sComp(binarySigned) {
            // Converts signed binary to unsigned binary to 2's complement binary.
            explanation.innerHTML += "First convert the signed binary (" + binarySigned + ") to unsigned binary:<br>";
            let binaryUnsigned = convertBinarySignedToBinaryUnsigned(binarySigned);
            explanation.innerHTML += "<br><br>Then convert the unsigned binary (" + binaryUnsigned + ") to 2's complement binary:<br>";
            let output = convertBinaryUnsignedToBinary2sComp(binaryUnsigned);
            return output;
        }

        function convertBinarySignedToDecimal(binary) {
            explanation.innerHTML += "Add each corresponding binary digit's power of 2 to the total if it is 1 (digits are counted from right to left starting at index 0 until the last/sign digit):<br>"
            let decimalTotal = 0;
            // Converts the input into an array with each digit as its own item.
            let binaryArray = Array.from(String(binary), Number);

            // Adds the decimal value for each filled binary digit (except the first digit) to the decimalTotal.
            let j = 0;
            for (let i = binaryArray.length - 1; i >= 1; i--) {
                if (binaryArray[i] == 1) {
                    explanation.innerHTML += "Total (" + decimalTotal + ") + Digit " + j + " (" + powers[j] + ") = ";
                    decimalTotal += powers[j];
                    explanation.innerHTML += decimalTotal + "<br>";
                }

                j++;
            }

            // Adds a negative sign to the output if the first digit is 1.
            if (binaryArray[0] == 1) {
                decimalTotal = -decimalTotal;
                explanation.innerHTML += "<br>Add the negative sign (if the sign digit is 1):";
                explanation.innerHTML += "<br>Total = " + decimalTotal;
                return decimalTotal;
            } else {
                explanation.innerHTML += "<br>Total = " + decimalTotal;
                return decimalTotal;
            }
        }

        function convertBinary1sCompToBinaryUnsigned(binary1sComp) {
            let output;

            if (binary1sComp.substring(0, 1) == 0) {
                explanation.innerHTML += "Remove all leading 0s:<br>" + binary1sComp + " -> ";
                output = removeLeadingZeros(binary1sComp, false);
                explanation.innerHTML += output;
                return output;
            } else {
                // Converts the input into an array with each digit as its own item.
                let outputArray = Array.from(String(binary1sComp), Number);

                // All digits are complemented.
                for (let i = outputArray.length - 1; i >= 0; i--) {
                    if (outputArray[i] == 0) {
                        outputArray[i] = 1;
                    } else {
                        outputArray[i] = 0;
                    }
                }

                output = createBinaryOutputLeftToRight(outputArray);
                explanation.innerHTML += "Complement all digits:<br>"
                explanation.innerHTML += binary1sComp + " -> " + output;

                explanation.innerHTML += "<br><br>Remove all leading 0s and add a negative sign:<br>" + output + " -> ";
                output = removeLeadingZeros(output, false);
                output = "-" + output;
                explanation.innerHTML += output;
                return output;
            }
        }

        function convertBinary1sCompToBinarySigned(binary1sComp) {
            explanation.innerHTML += "First convert the 1's complement binary to unsigned binary:<br>";
            // Converts the 2's complement binary to unsigned binary
            let binarySigned = convertBinary1sCompToBinaryUnsigned(binary1sComp);

            // Replaces the negative sign with 1 or prefixes the unsigned binary with 0 if it isn't
            let output;
            if (binarySigned.substring(0, 1) == "-") {
                output = "1" + binarySigned.substring(1);
            } else {
                output = "0" + binarySigned;
            }
            explanation.innerHTML += "<br><br>Then either replace the negative sign with a 1 or add a leading 0: " + output;

            return output;
        }

        function convertBinary1sCompToBinary2sComp(binary1sComp) {
            if (binary1sComp.substring(0, 1) == "1") {
                explanation.innerHTML += "Add 1 to the 1's complement to make it 2's complement:<br>" + binary1sComp + " + <br>";
                let addend1 = Array.from(String(binary1sComp), Number);

                // Creates 1 in 2's complement binary to be added.
                let addend2 = "";
                for (let i = 0; i < binary1sComp.length; i++) {
                    if (i == binary1sComp.length - 1) {
                        addend2 += "1";
                    } else {
                        addend2 += "0";
                    }
                }
                explanation.innerHTML += addend2 + " = <br>"
                addend2 = Array.from(String(addend2), Number);

                let output = addBinary(addend1, addend2);
                explanation.innerHTML += output;
                return output;
            } else {
                let output = removeLeadingZeros(binary1sComp, true);
                return output;
            }
        }

        function convertBinary1sCompToDecimal(binary1sComp) {
            let decimalTotal = 0;
            // Converts the input into an array with each digit as its own item.
            let binaryArray = Array.from(String(binary1sComp), Number);

            if (binaryArray[0] == 0) {
                // If the input is positive or 0, then the signed binary is returned.
                decimalTotal = convertBinarySignedToDecimal(binary1sComp);
            } else {
                explanation.innerHTML += "Add each corresponding binary digit's power of 2 to the total if it is 0 (digits are counted from right to left starting at index 0 until the last/sign digit):<br>"
                // If the input is negative, then:
                // 1) The 0 bits have their corresponding decimal values added to decimalTotal.
                let j = 0;
                for (let i = binaryArray.length - 1; i >= 0; i--) {
                    if (binaryArray[i] == 0) {
                        explanation.innerHTML += "Total (" + decimalTotal + ") + Digit " + j + " (" + powers[j] + ") = ";
                        decimalTotal += powers[j];
                        explanation.innerHTML += decimalTotal + "<br>";
                    }

                    j++;
                }

                // 2) The decimalTotal is made negative.
                decimalTotal = -decimalTotal;
                explanation.innerHTML += "<br>Since the 1's complement binary was negative, the decimal total is made negative:";
                explanation.innerHTML += "<br>Total = " + decimalTotal;
            }

            return decimalTotal;
        }

        function convertBinary2sCompToBinaryUnsigned(binary2sComp) {
            let output;

            if (binary2sComp.substring(0, 1) == 0) {
                // Converts the input into an array with each digit as its own item.
                let outputArray = Array.from(String(binary2sComp), Number);
                // Converts into an array and back so the function below can remove all redundant leading 0s.
                let output = createBinaryOutputLeftToRight(outputArray);
                output = removeLeadingZeros(output, false);
                return output;
            } else {
                // Converts the input into an array with each digit as its own item.
                let outputArray = Array.from(String(binary2sComp), Number);

                // Starts reading the binary from right to left until the first 1 is found. i is then decremented to the next digit.
                let i;
                for (i = outputArray.length - 1; i >= 0; i--) {
                    if (outputArray[i] == 1) {
                        i--;
                        break;
                    }
                }

                // From i moving left, all digits are complemented.
                for (i; i >= 0; i--) {
                    if (outputArray[i] == 0) {
                        outputArray[i] = 1;
                    } else {
                        outputArray[i] = 0;
                    }
                }

                output = createBinaryOutputLeftToRight(outputArray);
                output = removeLeadingZeros(output, false);
                output = "-" + output;
                return output;
            }
        }

        function convertBinary2sCompToBinarySigned(binary2sComp) {
            // Converts the 2's complement binary to unsigned binary
            let binarySigned = convertBinary2sCompToBinaryUnsigned(binary2sComp);

            // Replaces the negative sign with 1 or prefixes the unsigned binary with 0 if it isn't
            let output;
            if (binarySigned.substring(0, 1) == "-") {
                output = "1" + binarySigned.substring(1);
            } else {
                output = "0" + binarySigned;
            }

            output = removeLeadingZeros(output, true);
            return output;
        }

        function convertBinary2sCompToBinary1sComp(binary2sComp) {
            if (binary2sComp.substring(0, 1) == "1") {
                let addend1 = Array.from(String(binary2sComp), Number);

                // Creates -1 in 2's complement binary to be added.
                let addend2 = "";
                for (let i = 0; i < binary2sComp.length; i++) {
                    addend2 += "1";
                }
                addend2 = Array.from(String(addend2), Number);

                let output = addBinary(addend1, addend2);
                return output;
            } else {
                let output = removeLeadingZeros(binary2sComp, true);
                return output;
            }
        }

        function convertBinary2sCompToDecimal(binary) {
            let decimalTotal = 0;
            // Converts the input into an array with each digit as its own item.
            let binaryArray = Array.from(String(binary), Number);

            if (binaryArray[0] == 0) {
                // If the input is positive or 0, then the signed binary is returned.
                decimalTotal = convertBinarySignedToDecimal(binary);
            } else {
                // If the input is negative, then:
                // 1) The 0 bits have their corresponding decimal values added to decimalTotal.
                let j = 0;
                for (let i = binaryArray.length - 1; i >= 0; i--) {
                    if (binaryArray[i] == 0) {
                        decimalTotal += powers[j];
                    }

                    j++;
                }
                // 2) The decimalTotal is incremented by 1.
                decimalTotal++;
                // 3) The decimalTotal is made negative.
                decimalTotal = -decimalTotal;
            }

            return decimalTotal;
        }

        function convertDecimalToBinaryUnsigned(decimal) {
            // Creates an array with the size of all of the powers of 2 in the powers array.
            let outputArray = new Array(powers.length);
            
            // Sets remainder to the absolute value of the input so that the for-loop below knows which binary digits can be filled.
            let remainder;
            let isNegative = false;
            if (decimal < 0) {
                isNegative = true;
                remainder = -decimal;
            } else {
                remainder = decimal;
            }

            // Loops through the powers of 2 by finding the highest power of 2 that it can add, filling the binary digit for those that can be added,
            // and subtracting that power of 2 from the remainder so that there is a record of how much still needs to be accounted for.
            for (let i = powers.length - 1; i >= 0; i--) {
                if (powers[i] <= remainder) {
                    outputArray[i] = 1;
                    remainder -= powers[i];
                } else {
                    outputArray[i] = 0;
                }
            }

            let output = createBinaryOutputRightToLeft(outputArray);
            output = removeLeadingZeros(output, false);
            // Adds the negative sign back to the output if the input was negative.
            if (isNegative) output = "-" + output;
            return output;
        }

        function convertDecimalToBinarySigned(decimal) {
            // Creates an array with the size of all of the powers of 2 in the powers array.
            let outputArray = new Array(powers.length);

            // Sets remainder to the absolute value of the input so that the for-loop below knows which binary digits can be filled.
            let remainder;
            let isNegative = false;
            if (decimal < 0) {
                isNegative = true;
                remainder = -decimal;
            } else {
                remainder = decimal;
            }

            // Loops through the powers of 2 by finding the highest power of 2 that it can add, filling the binary digit for those that can be added,
            // and subtracting that power of 2 from the remainder so that there is a record of how much still needs to be accounted for.
            let foundFirstDigit = false;
            let firstDigit;
            for (let i = powers.length - 1; i >= 0; i--) {
                if (powers[i] <= remainder) {
                    // Stores the index of the first filled digit (index with 1) for the purpose of adding the sign bit in front of it after the loop.
                    if (!foundFirstDigit) {
                        foundFirstDigit = true;
                        firstDigit = i;
                    }

                    outputArray[i] = 1;
                    remainder -= powers[i];
                } else {
                    outputArray[i] = 0;
                }
            }

            // Adds the sign bit in front of the binary number.
            if (isNegative) {
                outputArray[firstDigit + 1] = 1;
            } else {
                outputArray[firstDigit + 1] = 0;
            }

            let output = createBinaryOutputRightToLeft(outputArray);
            output = removeLeadingZeros(output, true);
            return output;
        }

        function convertDecimalToBinary1sComp(decimal) {
            // Converts decimal to unsigned binary to 1's complement binary.
            let unsignedBinary = convertDecimalToBinaryUnsigned(decimal);
            let output = convertBinaryUnsignedToBinary1sComp(unsignedBinary);
            return output;
        }

        function convertDecimalToBinary2sComp(decimal) {
            // Converts decimal to unsigned binary to 2's complement binary.
            let unsignedBinary = convertDecimalToBinaryUnsigned(decimal);
            let output = convertBinaryUnsignedToBinary2sComp(unsignedBinary);
            return output;
        }

        function convertBinaryToHex(binary) {
            let hex = "";
            // Converts the input into an array with each digit as its own item.
            let binaryArray = Array.from(String(binary), Number);

            explanation.innerHTML += "Reading from right to left, group all digits into groups of four, convert that into hexadecimal, and add it to the front of the output:<br><br>"

            // For each group of 4 digits starting from the end, the group's binary is converted to decimal and added to the string.
            for (let i = binaryArray.length - 1; i >= 0; i -= 4) {
                let fourBitBinary = "";
                for (let j = Math.max(0, i - 3); j <= i; j++) {
                    if (!isNaN(binaryArray[j])) {
                        fourBitBinary += binaryArray[j];
                    }
                }

                let fourBitBinaryString = createBinaryOutputLeftToRight(fourBitBinary);

                explanation.innerHTML += "Convert the current group of up to 4 binary digits (" + fourBitBinaryString + ") to its decimal equivalent:<br>"
                // Converts the fourBitDecimal into a single Hex character.
                let fourBitDecimal = convertBinaryUnsignedToDecimal(Number(fourBitBinary));

                explanation.innerHTML += "Convert the decimal value (" + fourBitDecimal + ") to its hexadecimal equivalent: "
                if (fourBitDecimal >= 10) {
                    switch (fourBitDecimal) {
                        case 10:
                            fourBitDecimal = "A";
                            break;
                        case 11:
                            fourBitDecimal = "B";
                            break;
                        case 12:
                            fourBitDecimal = "C";
                            break;
                        case 13:
                            fourBitDecimal = "D";
                            break;
                        case 14:
                            fourBitDecimal = "E";
                            break;
                        case 15:
                            fourBitDecimal = "F";
                            break;
                    }
                }
                explanation.innerHTML += fourBitDecimal + "<br>";

                explanation.innerHTML += fourBitBinaryString + " -> " + fourBitDecimal + "<br>";

                explanation.innerHTML += "Add the hexadecimal digit  (" + fourBitDecimal + ") to the beginning of the output (" + hex + "): ";
                hex = fourBitDecimal + hex;
                explanation.innerHTML += hex + "<br><br>";
            }

            // Makes the answer negative if the input was negative.
            if (binary < 0) {
                hex = "-" + hex;
            }

            return hex;
        }

        function convertHexToBinary(hex) {
            explanation.innerHTML += "Reading from left to right, all hexadecimal digits are converted into binary and added to the end of the output:<br>"

            let binary = "";
            // Converts the input into an array with each digit as its own item.
            let hexArray = Array.from(String(hex), String);

            // Adds each hex bit's corresponding 4-bit binary to the output.
            for (let i = 0; i < hexArray.length; i++) {
                let currentHex = hexArray[i];
                let fourBitBinary;
                switch (currentHex) {
                    case "0":
                        fourBitBinary = "0000";
                        break;
                    case "1":
                        fourBitBinary = "0001";
                        break;
                    case "2":
                        fourBitBinary = "0010";
                        break;
                    case "3":
                        fourBitBinary = "0011";
                        break;
                    case "4":
                        fourBitBinary = "0100";
                        break;
                    case "5":
                        fourBitBinary = "0101";
                        break;
                    case "6":
                        fourBitBinary = "0110";
                        break;
                    case "7":
                        fourBitBinary = "0111";
                        break;
                    case "8":
                        fourBitBinary = "1000";
                        break;
                    case "9":
                        fourBitBinary = "1001";
                        break;
                    case "A":
                        fourBitBinary = "1010";
                        break;
                    case "B":
                        fourBitBinary = "1011";
                        break;
                    case "C":
                        fourBitBinary = "1100";
                        break;
                    case "D":
                        fourBitBinary = "1101";
                        break;
                    case "E":
                        fourBitBinary = "1110";
                        break;
                    case "F":
                        fourBitBinary = "1111";
                        break;
                }
                explanation.innerHTML += "Convert the hexadecimal value (" + currentHex + ") to its binary equivalent: " + fourBitBinary + "<br>";

                explanation.innerHTML += "Add the binary  (" + fourBitBinary + ") to the end of the output (" + binary + "): ";
                binary += fourBitBinary;
                explanation.innerHTML += binary + "<br><br>";
            }

            return binary;
        }

        function addBinary(addend1, addend2) {
            // Adds each column to the sum and calculates the carry for the next column for all digits.
            let sum = [];
            let carry = 0;
            for (let i = addend1.length - 1; i >= 0; i--) {
                sum[i] = (addend1[i] + addend2[i] + carry) % 2;
                carry = Math.min(Math.max(0, addend1[i] + addend2[i] + carry - 1), 1);
            }

            let output = createBinaryOutputLeftToRight(sum);
            output = removeLeadingZeros(output, true);

            // Corrects addition overflow by adding the sign carry to the front if needed.
            if (addend1[0] == 0 && addend2[0] == 0 && sum[0] == 1) {
                output = "0" + output;
            } else if (addend1[0] == 1 && addend2[0] == 1 && sum[0] == 0) {
                output = "1" + output;
            }

            // Prevents false representations of 0 (which has strange conversions from 1's complement to 2's complement).
            if (output == 0) {
                output = "01";
            }
            return output;
        }

        function createBinaryOutputRightToLeft(outputArray) {
            let outputString = "";

            // Adds all digits to the outputString.
            for (let i = outputArray.length - 1; i >= 0; i--) {
                outputString += outputArray[i];
            }

            // Prevents errors with 0 as an input.
            if (outputString == "") {
                outputString = "0";
            }

            return outputString;
        }

        function createBinaryOutputLeftToRight(outputArray) {
            let outputString = "";

            // Adds all digits to the outputString.
            for (let i = 0; i < outputArray.length; i++) {
                outputString += outputArray[i];
            }

            // Prevents errors with 0 as an input.
            if (outputString == "") {
                outputString = "0";
            }

            return outputString;
        }

        function removeLeadingZeros(inputString, keepLeadingZero) {
            let outputString = inputString;
            for (let i = 0; i < inputString.length; i++) {
                let digit = inputString.substring(i, i+ 1);
                if (digit == 0) {
                    if (keepLeadingZero) {
                        outputString = inputString.substring(i);
                    } else {
                        outputString = inputString.substring(i + 1);
                    }
                } else {
                    break;
                }
            }

            return outputString;
        }

        // Returns the appropriate subscript to display for the number based on its type.
        function getSubscript(baseType) {
            let subscript;

            switch(baseType) {
                case "binaryUnsigned":
                    subscript = "2";
                    break;
                case "binarySigned":
                    subscript = "2";
                    break;
                case "binary1sComp":
                    subscript = "2";
                    break;
                case "binary2sComp":
                    subscript = "2";
                    break;
                case "decimal":
                    subscript = "10";
                    break;
                case "hex":
                subscript = "16";
                    break;
            }

            return subscript;
        }

        // Prevents calculation of outputs based on many fail cases for the inputs and instructs the user what to do to resolve them.
        function ensureAllInputsSelected() {
            // Removes all leading and trailing white spaces.
            input = input.trim();

            // Requires an input.
            if (input == "") {
                outputElement.innerHTML = "Please enter an input.";
                outputValueField.innerHTML = "";
                return false;
            }

            // Requires only number values for non-hex inputs.
            // Requires only number or A-F values for hex inputs.
            if (inputType != "hex") {
                if (isNaN(input) || isNaN(parseFloat(input))) {
                    outputElement.innerHTML = "Please only enter numbers for the input.";
                    outputValueField.innerHTML = "";
                    return false;
                }
            } else {
                input = input.toUpperCase();

                let inputArray = Array.from(String(input), String);
                for (let i = 0; i < inputArray.length; i++) {
                    let char = inputArray[i];
                    if (isNaN(parseInt(char)) && char != "A" && char != "B" && char != "C" && char != "D" && char != "E" && char != "F") {
                        outputElement.innerHTML = "Please only enter numbers or letters A-F for the input.";
                        outputValueField.innerHTML = "";
                        return false;
                    }
                }
            }

            // Requires an inputType to be selected.
            if (inputType == "none") {
                outputElement.innerHTML = "Please select an input type.";
                outputValueField.innerHTML = "";
                return false;
            }

            // Requires an outputType to be selected.
            if (outputType == "none") {
                outputElement.innerHTML = "Please select an output type.";
                outputValueField.innerHTML = "";
                return false;
            }

            // Requires the inputType and outputType to be different so an actual calculation can be made (this also prevents probable user error).
            if (inputType == outputType) {
                outputElement.innerHTML = "Please make sure the input type and output type are different from each other.";
                outputValueField.innerHTML = "";
                return false;
            }

            // Requires that non-unsigned binary doesn't have a negative sign.
            if (inputType == "binarySigned" || inputType == "binary1sComp" || inputType == "binary2sComp") {
                if (input < 0) {
                        outputElement.innerHTML = "Please make sure the input does not have a negative sign.";
                        outputValueField.innerHTML = "";
                        return false;
                }
            }

            // Requires that the input is only composed of 1s, 0s, or a negative sign in the first index.
            if (inputType == "binaryUnsigned" || inputType == "binarySigned" || inputType == "binary1sComp" || inputType == "binary2sComp") {
                let binaryArray = Array.from(String(input), Number);

                for (let i = 0; i < binaryArray.length; i++) {
                    if (binaryArray[i] != 0 && binaryArray[i] != 1 && (i > 0 || (i == 0 && input > 0))) {
                        outputElement.innerHTML = "Please make sure the input is only composed of 1s and 0s.";
                        outputValueField.innerHTML = "";
                        return false;
                    }
                }
            }

            if ((inputType == "binaryUnsigned" || inputType == "binarySigned" || inputType == "binary1sComp" || inputType == "binary2sComp") && input.length > 33) {
                outputElement.innerHTML = "Please make sure the input is less than 34 digits.";
                outputValueField.innerHTML = "";
                return false;
            }

            // Requires that the input is less than 4294967296 (32 binary bits).
            if (inputType == "decimal" && Math.abs(input) > 4294967295) {
                outputElement.innerHTML = "Please make sure the absolute value of the input is less than 4,294,976,296.";
                outputValueField.innerHTML = "";
                return false;
            }

            // Requires hex inputs to be 8 characters or less so they can be displayed.
            if (inputType == "hex" && input.length > 8) {
                outputElement.innerHTML = "Please make sure the hex input is less than 8 characters long.";
                outputValueField.innerHTML = "";
                return false;
            }

            return true;
        }

	    function displayOutput() {
            // Collects all inputs from the user.
            input = document.getElementById("inputValueField").value;
            inputType = document.getElementById("inputTypeSelect").value;
            outputType = document.getElementById("outputTypeSelect").value;

            // Allows the output and explanation to be visible if they aren't already.
            outputElement.style.visibility = "visible";
            explanation.style.visibility = "visible";

            // Resets all explanations.
            explanation.innerHTML = "";

            // Only allows the outputs to be updated if the inputs are valid.
            let allInputsSelected = ensureAllInputsSelected();
            if (allInputsSelected == true) {
                // Displays all formatted end forms of the output.
                let output = calculateOutput();
                let inputSubscript = getSubscript(inputType);
                let outputSubscript = getSubscript(outputType);

                if (outputType != "hex" && isNaN(output)) {
                    // Requires that all binary to decimal conversions are within the proper limits.
                    outputElement.innerHTML = "Please make sure the absolute value of the output is less than 4,294,976,296.";
                    outputValueField.innerHTML = "";
                } else if (outputType == "hex" && output.length > 8) {
                    outputElement.innerHTML = "Please make sure the input can be represented in 8 hex characters.";
                    outputValueField.innerHTML = "";
                } else {
                    // Displays the output if everything is valid.
                    outputValueField.innerHTML = output;
                    outputElement.innerHTML = input + inputSubscript.sub() + " = " + output + outputSubscript.sub();
                }
            }
	    }
    </script>
</body>

</html>
